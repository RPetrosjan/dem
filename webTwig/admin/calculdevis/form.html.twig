<form>
        <div class="box-body">
            <div class="sonata-ba-collapsed-fields">

                <div class="form-group">
                    <label class="control-label">
                        Prix HT &euro;
                    </label>
                    <div class="sonata-ba-field sonata-ba-field-standard-natural">
                        <input type="text" id="prixht" maxlength="50" class="form-control" />
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label" >
                        TVA %
                    </label>
                    <div class="sonata-ba-field sonata-ba-field-standard-natural">
                        <input type="text" id="prixtva" maxlength="50" class=" form-control" value="20" />
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label" >
                        Prix TTC &euro;
                    </label>
                    <div class="sonata-ba-field sonata-ba-field-standard-natural">
                        <input type="text" id="prixttc" maxlength="50" class="form-control" disabled="disabled">
                    </div>
                </div>


                <div class="form-group">
                    <label class="control-label" >
                        Acompte %
                    </label>
                    <div class="sonata-ba-field sonata-ba-field-standard-natural">
                        <input type="text" id="accomte" maxlength="50" class=" form-control" value="30" />
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label" >
                        Acompte de Ã  la commande &euro;
                    </label>
                    <div class="sonata-ba-field sonata-ba-field-standard-natural">
                        <input type="text" id="accompte_commande" maxlength="50" disabled="disabled" class=" form-control" />
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label" >
                        Solde livraison &euro;
                    </label>
                    <div class="sonata-ba-field sonata-ba-field-standard-natural">
                        <input type="text" id="solde_livraison" maxlength="50" disabled="disabled" class=" form-control" />
                    </div>
                </div>



                <button type="button" id="button_valider" class="btn btn-success" name="btn_update_and_list"><i class="fa fa-paper-plane"></i> Valider</button>
                <button type="button" id="button_voir" class="btn btn-success" name="btn_update_and_list"><i class="far fa-file-pdf"></i> Voir</button>
                <div class="result_devis"></div>
            </div>
        </div>

</form>
<style>
    .result_devis{
        display: inline-block;
        vertical-align: top;
        font-family: verdana;
    }

</style>
<script>
    $('#button_voir').click(function () {
            $('.result_devis').html('' +
                '<a class="btn btn-success" target="_blank" href="http://demadmin.dd/adminss/app/demandedevis/{{ object.id }}/pdfdevis?priceht='+$("#prixht").val()+'&tva='+$("#prixtva").val()+'&acompte='+$("#accomte").val()+'"><i class="far fa-file-pdf"></i> Devis</a>');
    });

    $("#prixht, #prixtva, #accomte").keyup(function () {

        var prixht = $("#prixht").val();
        if($.isNumeric(prixht) == false) {
            prixht = 0;
        }
        var tva = $("#prixtva").val();
        if($.isNumeric(tva) == false) {
            tva = 0;
        }

        var prixttc = parseFloat(prixht*tva / 100) + parseFloat(prixht);
        $("#prixttc").val(prixttc);


        var accompte_commande = prixttc * $("#accomte").val() / 100;
        if($.isNumeric(accompte_commande) == false) {
            accompte_commande = 0;
        }

        $("#accompte_commande").val(accompte_commande);
        $("#solde_livraison").val(prixttc - accompte_commande);

    });


</script>